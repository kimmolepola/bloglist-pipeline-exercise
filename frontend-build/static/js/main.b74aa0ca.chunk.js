(this.webpackJsonpbloglist_frontend=this.webpackJsonpbloglist_frontend||[]).push([[0],{18:function(e,t,n){e.exports=n(42)},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(17),u=n.n(c),l=n(7),i=n(1),s=n.n(i),p=n(3),f=n(6),b=n(4),d=n(5),m=n.n(d),v=function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat("/api/blogs","/").concat(t),r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat("/api/blogs","/").concat(t.id),t,r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={getAll:function(){return m.a.get("/api/blogs").then((function(e){return e.data}))},setConfig:function(e){r={headers:{Authorization:"bearer ".concat(e)}}},create:function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/blogs",t,r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),put:g,remove:v},O={login:function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.notification;return null===t?null:o.a.createElement("div",{className:t.className},t.message)},E=o.a.forwardRef((function(e,t){var n=e.children,r=e.buttonLabel,c=Object(a.useState)(!1),u=Object(b.a)(c,2),l=u[0],i=u[1],s={display:l?"none":""},p={display:l?"":"none"},f=function(){return i(!l)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:f}})),o.a.createElement("div",null,o.a.createElement("div",{style:s},o.a.createElement("button",{type:"button",onClick:f},r)),o.a.createElement("div",{style:p},n,o.a.createElement("button",{type:"button",onClick:f},"cancel")))}));E.displayName="Togglable";var w=E,j=function(e,t){var n=Object(a.useState)(""),r=Object(b.a)(n,2),o=r[0],c=r[1];return{type:e,value:o,onChange:function(e){c(e.target.value)},reset:function(){c("")},name:t}};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.user,n=e.blogs,r=e.setBlogs,a=e.notify,c=j("text","Url"),u=c.reset,l=Object(f.a)(c,["reset"]),i=j("text","Author"),b=i.reset,d=Object(f.a)(i,["reset"]),m=j("text","Title"),v=m.reset,g=Object(f.a)(m,["reset"]),O=o.a.createRef(),h=function(){var e=Object(p.a)(s.a.mark((function e(o){var c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),O.current.toggleVisibility(),e.prev=2,e.next=5,y.create({title:g.value,author:d.value,url:l.value});case 5:c=e.sent,(i=x({},c)).user=x({id:c.user},t),r(n.concat(i)),u(),b(),v(),a("a new blog ".concat(g.value," by ").concat(d.value," added"),"success"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),a("Failed","error");case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement(w,{buttonLabel:"new blog",ref:O},o.a.createElement("h2",null,"create new"),o.a.createElement("form",{onSubmit:h},o.a.createElement("div",null,"title:",o.a.createElement("input",g),o.a.createElement("button",{type:"button",onClick:function(){return v()}},"reset")),o.a.createElement("div",null,"author:",o.a.createElement("input",d),o.a.createElement("button",{type:"button",onClick:function(){return b()}},"reset")),o.a.createElement("div",null,"url:",o.a.createElement("input",l),o.a.createElement("button",{type:"button",onClick:function(){return u()}},"reset")),o.a.createElement("button",{type:"submit"},"create"))))},S=function(e){var t=e.blog,n=e.handleBlogUpdate,r=e.handleBlogDelete,c=e.user,u=Object(a.useState)(!1),l=Object(b.a)(u,2),i=l[0],s=l[1],p=function(){s(!i)},f={display:c.username===t.user.username?"":"none",backgroundColor:"lightblue"},d={display:i?"none":"",paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},m={display:i?"":"none",paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5};return o.a.createElement("div",null,o.a.createElement("div",{tabIndex:"0",role:"button",style:d,onKeyDown:function(){return p()},onClick:function(){return p()}},t.title," ",t.author),o.a.createElement("div",{tabIndex:"0",role:"button",style:m,onKeyDown:function(){return p()},onClick:function(){return p()}},t.title," ",t.author,o.a.createElement("br",null),o.a.createElement("a",{href:t.url},t.url),o.a.createElement("br",null),t.likes,o.a.createElement("button",{type:"button",onClick:function(){return function(){var e={id:t.id,user:t.user.id,title:t.title,author:t.author,likes:t.likes+1};n(e)}()}},"like")," ",o.a.createElement("br",null),"added by ",t.user.name,o.a.createElement("button",{style:f,type:"button",onClick:function(){return r(t.id,t.title,t.author)}},"remove")))};n(41);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),u=Object(b.a)(c,2),l=u[0],i=u[1],d=Object(a.useState)(null),m=Object(b.a)(d,2),v=m[0],g=m[1],E=j("text","Username"),w=E.reset,k=Object(f.a)(E,["reset"]),x=j("password","Password"),C=x.reset,B=Object(f.a)(x,["reset"]);Object(a.useEffect)((function(){y.getAll().then((function(e){r(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);g(t),y.setConfig(t.token)}}),[]);var I=function(e,t){i({message:e,className:t}),setTimeout((function(){i(null)}),5e3)},U=function(){var e=Object(p.a)(s.a.mark((function e(t,a,o){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("remove blog ".concat(a," by ").concat(o))){e.next=5;break}return e.next=3,y.remove(t);case 3:204===e.sent.status?(c=n.reduce((function(e,n){return n.id!==t&&e.push(n),e}),[]),r(c)):I("failed","error");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(s.a.mark((function e(t){var a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.put(t);case 2:a=e.sent,o=n.map((function(e){if(e.id===a.id){var t=D({},a);return t.user=e.user,t}return e})),r(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){window.localStorage.removeItem("loggedBlogappUser"),g(null)},T=function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login({username:k.value,password:B.value});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),y.setConfig(n.token),g(n),w(),C(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),I("Wrong username or password","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,null===v&&o.a.createElement("div",null,o.a.createElement("h2",null,"Log in to application"),o.a.createElement(h,{notification:l}),o.a.createElement("form",{onSubmit:T},o.a.createElement("div",null,"username",o.a.createElement("input",k)),o.a.createElement("div",null,"password",o.a.createElement("input",B)),o.a.createElement("button",{type:"submit"},"Login"))),null!==v&&o.a.createElement("div",null,o.a.createElement("h2",null,"blogs"),o.a.createElement(h,{notification:l}),o.a.createElement("p",null,v.name," logged in",o.a.createElement("button",{onClick:N,type:"button"},"logout")),o.a.createElement(P,{user:v,blogs:n,setBlogs:r,notify:I}),n.sort((function(e,t){return e.likes-t.likes})).map((function(e){return o.a.createElement(S,{key:e.id,blog:e,handleBlogUpdate:L,handleBlogDelete:U,user:v})}))))};u.a.render(o.a.createElement(B,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b74aa0ca.chunk.js.map