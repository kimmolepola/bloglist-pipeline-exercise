(this.webpackJsonpbloglist_frontend = this.webpackJsonpbloglist_frontend || []).push([[0], {
  18(e, t, n) { e.exports = n(42); },
  41(e, t, n) {},
  42(e, t, n) {
    n.r(t); let r; const a = n(0); const o = n.n(a); const c = n(17); const u = n.n(c); const l = n(7); const i = n(1); const s = n.n(i); const p = n(3); const f = n(6); const b = n(4); const d = n(5); const m = n.n(d); const v = (function () { const e = Object(p.a)(s.a.mark((function e(t) { let n; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return e.next = 2, m.a.delete(''.concat('/api/blogs', '/').concat(t), r); case 2: return n = e.sent, e.abrupt('return', n); case 4: case 'end': return e.stop(); } }), e); }))); return function (t) { return e.apply(this, arguments); }; }()); const g = (function () { const e = Object(p.a)(s.a.mark((function e(t) { let n; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return e.next = 2, m.a.put(''.concat('/api/blogs', '/').concat(t.id), t, r); case 2: return n = e.sent, e.abrupt('return', n.data); case 4: case 'end': return e.stop(); } }), e); }))); return function (t) { return e.apply(this, arguments); }; }()); const y = {
      getAll() { return m.a.get('/api/blogs').then(((e) => e.data)); }, setConfig(e) { r = { headers: { Authorization: 'bearer '.concat(e) } }; }, create: (function () { const e = Object(p.a)(s.a.mark((function e(t) { let n; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return e.next = 2, m.a.post('/api/blogs', t, r); case 2: return n = e.sent, e.abrupt('return', n.data); case 4: case 'end': return e.stop(); } }), e); }))); return function (t) { return e.apply(this, arguments); }; }()), put: g, remove: v,
    }; const O = { login: (function () { const e = Object(p.a)(s.a.mark((function e(t) { let n; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return e.next = 2, m.a.post('/api/login', t); case 2: return n = e.sent, e.abrupt('return', n.data); case 4: case 'end': return e.stop(); } }), e); }))); return function (t) { return e.apply(this, arguments); }; }()) }; const h = function (e) { const t = e.notification; return t === null ? null : o.a.createElement('div', { className: t.className }, t.message); }; const E = o.a.forwardRef(((e, t) => { const n = e.children; const r = e.buttonLabel; const c = Object(a.useState)(!1); const u = Object(b.a)(c, 2); const l = u[0]; const i = u[1]; const s = { display: l ? 'none' : '' }; const p = { display: l ? '' : 'none' }; const f = function () { return i(!l); }; return Object(a.useImperativeHandle)(t, (() => ({ toggleVisibility: f }))), o.a.createElement('div', null, o.a.createElement('div', { style: s }, o.a.createElement('button', { type: 'button', onClick: f }, r)), o.a.createElement('div', { style: p }, n, o.a.createElement('button', { type: 'button', onClick: f }, 'cancel'))); })); E.displayName = 'Togglable'; const w = E; const j = function (e, t) {
      const n = Object(a.useState)(''); const r = Object(b.a)(n, 2); const o = r[0]; const c = r[1]; return {
        type: e, value: o, onChange(e) { c(e.target.value); }, reset() { c(''); }, name: t,
      };
    }; function k(e, t) { const n = Object.keys(e); if (Object.getOwnPropertySymbols) { let r = Object.getOwnPropertySymbols(e); t && (r = r.filter(((t) => Object.getOwnPropertyDescriptor(e, t).enumerable))), n.push.apply(n, r); } return n; } function x(e) { for (let t = 1; t < arguments.length; t++) { var n = arguments[t] != null ? arguments[t] : {}; t % 2 ? k(n, !0).forEach(((t) => { Object(l.a)(e, t, n[t]); })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : k(n).forEach(((t) => { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)); })); } return e; } const P = function (e) { const t = e.user; const n = e.blogs; const r = e.setBlogs; const a = e.notify; const c = j('text', 'Url'); const u = c.reset; const l = Object(f.a)(c, ['reset']); const i = j('text', 'Author'); const b = i.reset; const d = Object(f.a)(i, ['reset']); const m = j('text', 'Title'); const v = m.reset; const g = Object(f.a)(m, ['reset']); const O = o.a.createRef(); const h = (function () { const e = Object(p.a)(s.a.mark((function e(o) { let c; let i; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return o.preventDefault(), O.current.toggleVisibility(), e.prev = 2, e.next = 5, y.create({ title: g.value, author: d.value, url: l.value }); case 5: c = e.sent, (i = x({}, c)).user = x({ id: c.user }, t), r(n.concat(i)), u(), b(), v(), a('a new blog '.concat(g.value, ' by ').concat(d.value, ' added'), 'success'), e.next = 18; break; case 15: e.prev = 15, e.t0 = e.catch(2), a('Failed', 'error'); case 18: case 'end': return e.stop(); } }), e, null, [[2, 15]]); }))); return function (t) { return e.apply(this, arguments); }; }()); return o.a.createElement('div', null, o.a.createElement(w, { buttonLabel: 'new blog', ref: O }, o.a.createElement('h2', null, 'create new'), o.a.createElement('form', { onSubmit: h }, o.a.createElement('div', null, 'title:', o.a.createElement('input', g), o.a.createElement('button', { type: 'button', onClick() { return v(); } }, 'reset')), o.a.createElement('div', null, 'author:', o.a.createElement('input', d), o.a.createElement('button', { type: 'button', onClick() { return b(); } }, 'reset')), o.a.createElement('div', null, 'url:', o.a.createElement('input', l), o.a.createElement('button', { type: 'button', onClick() { return u(); } }, 'reset')), o.a.createElement('button', { type: 'submit' }, 'create')))); }; const S = function (e) {
      const t = e.blog; const n = e.handleBlogUpdate; const r = e.handleBlogDelete; const c = e.user; const u = Object(a.useState)(!1); const l = Object(b.a)(u, 2); const i = l[0]; const s = l[1]; const p = function () { s(!i); }; const f = { display: c.username === t.user.username ? '' : 'none', backgroundColor: 'lightblue' }; const d = {
        display: i ? 'none' : '', paddingTop: 10, paddingLeft: 2, border: 'solid', borderWidth: 1, marginBottom: 5,
      }; const m = {
        display: i ? '' : 'none', paddingTop: 10, paddingLeft: 2, border: 'solid', borderWidth: 1, marginBottom: 5,
      }; return o.a.createElement('div', null, o.a.createElement('div', {
        tabIndex: '0', role: 'button', style: d, onKeyDown() { return p(); }, onClick() { return p(); },
      }, t.title, ' ', t.author), o.a.createElement('div', {
        tabIndex: '0', role: 'button', style: m, onKeyDown() { return p(); }, onClick() { return p(); },
      }, t.title, ' ', t.author, o.a.createElement('br', null), o.a.createElement('a', { href: t.url }, t.url), o.a.createElement('br', null), t.likes, o.a.createElement('button', {
        type: 'button',
        onClick() {
          return (function () {
            const e = {
              id: t.id, user: t.user.id, title: t.title, author: t.author, likes: t.likes + 1,
            }; n(e);
          }());
        },
      }, 'like'), ' ', o.a.createElement('br', null), 'added by ', t.user.name, o.a.createElement('button', { style: f, type: 'button', onClick() { return r(t.id, t.title, t.author); } }, 'remove')));
    }; n(41); function C(e, t) { const n = Object.keys(e); if (Object.getOwnPropertySymbols) { let r = Object.getOwnPropertySymbols(e); t && (r = r.filter(((t) => Object.getOwnPropertyDescriptor(e, t).enumerable))), n.push.apply(n, r); } return n; } function D(e) { for (let t = 1; t < arguments.length; t++) { var n = arguments[t] != null ? arguments[t] : {}; t % 2 ? C(n, !0).forEach(((t) => { Object(l.a)(e, t, n[t]); })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : C(n).forEach(((t) => { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)); })); } return e; } const B = function () {
      const e = Object(a.useState)([]); const t = Object(b.a)(e, 2); const n = t[0]; const r = t[1]; const c = Object(a.useState)(null); const u = Object(b.a)(c, 2); const l = u[0]; const i = u[1]; const d = Object(a.useState)(null); const m = Object(b.a)(d, 2); const v = m[0]; const g = m[1]; const E = j('text', 'Username'); const w = E.reset; const k = Object(f.a)(E, ['reset']); const x = j('password', 'Password'); const C = x.reset; const B = Object(f.a)(x, ['reset']); Object(a.useEffect)((() => { y.getAll().then(((e) => { r(e); })); }), []), Object(a.useEffect)((() => { const e = window.localStorage.getItem('loggedBlogappUser'); if (e) { const t = JSON.parse(e); g(t), y.setConfig(t.token); } }), []); const I = function (e, t) { i({ message: e, className: t }), setTimeout((() => { i(null); }), 5e3); }; const U = (function () { const e = Object(p.a)(s.a.mark((function e(t, a, o) { let c; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: if (!window.confirm('remove blog '.concat(a, ' by ').concat(o))) { e.next = 5; break; } return e.next = 3, y.remove(t); case 3: e.sent.status === 204 ? (c = n.reduce(((e, n) => (n.id !== t && e.push(n), e)), []), r(c)) : I('failed', 'error'); case 5: case 'end': return e.stop(); } }), e); }))); return function (t, n, r) { return e.apply(this, arguments); }; }()); const L = (function () { const e = Object(p.a)(s.a.mark((function e(t) { let a; let o; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return e.next = 2, y.put(t); case 2: a = e.sent, o = n.map(((e) => { if (e.id === a.id) { const t = D({}, a); return t.user = e.user, t; } return e; })), r(o); case 5: case 'end': return e.stop(); } }), e); }))); return function (t) { return e.apply(this, arguments); }; }()); const N = function () { window.localStorage.removeItem('loggedBlogappUser'), g(null); }; const T = (function () { const e = Object(p.a)(s.a.mark((function e(t) { let n; return s.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return t.preventDefault(), e.prev = 1, e.next = 4, O.login({ username: k.value, password: B.value }); case 4: n = e.sent, window.localStorage.setItem('loggedBlogappUser', JSON.stringify(n)), y.setConfig(n.token), g(n), w(), C(), e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(1), I('Wrong username or password', 'error'); case 15: case 'end': return e.stop(); } }), e, null, [[1, 12]]); }))); return function (t) { return e.apply(this, arguments); }; }()); return o.a.createElement('div', null, v === null && o.a.createElement('div', null, o.a.createElement('h2', null, 'Log in to application'), o.a.createElement(h, { notification: l }), o.a.createElement('form', { onSubmit: T }, o.a.createElement('div', null, 'username', o.a.createElement('input', k)), o.a.createElement('div', null, 'password', o.a.createElement('input', B)), o.a.createElement('button', { type: 'submit' }, 'Login'))), v !== null && o.a.createElement('div', null, o.a.createElement('h2', null, 'blogs'), o.a.createElement(h, { notification: l }), o.a.createElement('p', null, v.name, ' logged in', o.a.createElement('button', { onClick: N, type: 'button' }, 'logout')), o.a.createElement(P, {
        user: v, blogs: n, setBlogs: r, notify: I,
      }), n.sort(((e, t) => e.likes - t.likes)).map(((e) => o.a.createElement(S, {
        key: e.id, blog: e, handleBlogUpdate: L, handleBlogDelete: U, user: v,
      })))));
    }; u.a.render(o.a.createElement(B, null), document.getElementById('root'));
  },
}, [[18, 1, 2]]]);
// # sourceMappingURL=main.b74aa0ca.chunk.js.map
